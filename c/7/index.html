<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>点击切换背景色，刷新后保存-豪情</title>
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap-theme.min.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../../css/reset.css" media="all"/>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <style type="text/css">
        *{margin:0;padding:0;}
        body{font:12px/1.125 Microsoft YaHei;background:#fff;}
        ul,li{list-style:none;}
        a{text-decoration:none;}
        .wrap{width:400px;height:350px;text-align:center;margin:150px auto;}
        .wrap .btn{margin:0 10px;padding:8px 40px;}
        .inner{padding:15px;}
        .clearfix{overflow:hidden;_zoom:1;}
        .none{display:none;}
    </style>
    <link rel="stylesheet" id="style" href="css/blue.css">
</head>
<body>
<div class="wrap">
    <div class="demo" id="div">
        <input type="text" name="" size="60" id="input" class="input input-lg">
    </div>
</div>
<div style="display:none;">
    <div id="div" style="width:100px;height:200px;background:#000;"></div>
    <button id="btn">test</button>
</div>
<script>
    (function(){
        var div = document.getElementById('div')
        var btn = div.getElementsByTagName('button')
        var style = document.getElementById('style')
        var css = ['blue.css', 'yellow.css', 'green.css']

        function init(){
            var href = getCookie('css')
            if(href.length){
                setStyle(href)
            }
        }

        init()

        var dog = {
            $ : function(selector){
                return document.querySelector(selector);
            },
            on: function(el, type, handler){
                el.addEventListener(type, handler, false);
            },
            off: function(el, type, handler){
                el.removeEventListener(type, handler);
            },
            position : function(obj, attr){
                if(obj){
                    var method = obj.getBoundingClientRect();
                    return attr ? method[attr] : method;
                } else {
                    console.log('对象不存在！');
                }
            },
            cache : {},
            tpl : function(str, data){
                var fn= !/\s/.test(str) ? 
                    this.cache[str] = cache[str] || tmpl(document.getElementById(str).innerHTML) :
                        new Function("obj","var p='';p+='"
                        +str.replace(/[\r\n\t]/g," ")
                        .split('\\').join("\\\\")
                        .split("<%").join("\t")
                        .replace(/((^|%>)[^\t]*)'/g, "$1\r")
                        .replace(/\t=(.*?)%>/g, "'+$1+'")
                        .split("\t").join("';")
                        .split("%>").join("p+='")
                        .split("\r").join("\\'")
                        +"';return p;");

                return data? fn.call(data):fn;
            },
            setCookie : function(key, value, day){
                var d = new Date()
                d.setDate(d.getDate() + day)
                document.cookie = key + '=' + value + ';expires=' + d
            },
            getCookie : function(key){
                var list = document.cookie.split(';')
                for (var i = 0; i < list.length; i++) {
                    var one = list[i].split('=')
                    if(one[0] == key){
                        return one[1];
                    }
                };
                return ''
            },
            delCookies : function(key){
                this.setCookie(key, 1, -1)
            }
        }

        function Palette(){
            var args = arguments[0],
                dom = args.dom;

            for(var key in args){
                if(key == 'dom'){
                    this.getDom(dom);
                } else {
                    this[key] = args[key];
                }
            }
            this.init();
        }
        Palette.prototype = {
            init : function(){
                this.render();
            },
            setDom : function(){
                this.getDom(this._dom);
            },
            getDom : function(dom){
                for(var prop in dom){
                    this[prop] = dog.$(dom[prop]);
                }
            },
            render : function(){

            }
        }

        var defaults = {
            dom : {
                container : '#calendar',
                input     : '#input'
            },
            zh : {
                days        :  ['日','一','二','三','四','五','六'],
                months      :  ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
                monthsShort :  ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一','十二'],
                today       :  '今天',
                clear       :  '清空'
            },
            tpl : 
                [
                    '<div class="datetimepicker datetimepicker-dropdown-bottom-right dropdown-menu">' +
                        '<div class="datetimepicker-days">' +
                            '<table class="table-condensed">' +
                                '<thead>' +
                                    '<tr>' +
                                        '<th class="prev"><i class="icon-arrow-left"></i></th>' +
                                        '<th colspan="5" class="switch"></th>' +
                                        '<th class="next"><i class="icon-arrow-right"></i></th>' +
                                    '</tr>' +
                                '</thead>' + 
                                '<tbody></tbody>' +
                                '<tfoot class="none">' + 
                                    '<tr><th colspan="7" class="today"></th></tr>' +
                                    '<tr><th colspan="7" class="clear"></th></tr>' +
                                '</tfoot>' +
                            '</table>' +
                        '</div>' +
                    '</div>',
                    '1'
                ]
                
        }
        document.getElementById('input').onclick = function(e){
            new Calendar(defaults);
            e.stopPropagation();
        }
    }());
</script>
</body>
</html>